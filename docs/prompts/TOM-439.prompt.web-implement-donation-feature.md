## AI 指令包 (AI Instruction Package) - TOM-439

### 🎯 目标定义 (Objective)
* **Linear Issue**: TOM-439 - Web: 实现"请我喝杯咖啡"打赏功能
* **核心指令**: 在“脚本快拆”Web 应用 (`apps/web`) 中集成一个基于**微信支付**和**支付宝收款二维码**的自愿打赏功能。在指定位置（如页脚、结果页）添加展示二维码的 UI 组件，并包含清晰的说明文字。确保 UI 风格与现有 shadcn/ui 保持一致，并预留点击/查看事件的追踪点。

### 📋 上下文引用 (Context References)
* **主要操作文件**:
    * `@components/layout/Footer.tsx` 
    * `@app/result/page.tsx` 
    * (可能需要创建新的组件, e.g., `@components/feature/DonationSection.tsx`) 
    * `.env.development` / `.env.production` (位于 `src` 目录下) 
* **设计/规范**:
    * `Linear Issue TOM-439 (作为 PRD)` 
    * `@rules/001-gen-constitution-principles.mdc` 
    * `@rules/010-gen-coding-standards.mdc` 
    * `@rules/040-spec-visual-design-principles.mdc` 
* **资源**:
    * 微信收款二维码图片路径: `/wechat_donate_qr.png` (位于 `apps/web/public/`)
    * 支付宝收款二维码图片路径: `/alipay_donate_qr.png` (位于 `apps/web/public/`)

### 🔧 实现要求/约束 (Requirements & Constraints)
* **技术栈**: Next.js (App Router), React, TypeScript, Tailwind CSS, shadcn/ui。
* **功能要求**:
    1.  创建一个可复用的 React 组件 (`DonationSection`?) 用于展示打赏信息。
    2.  该组件应能接收二维码图片路径作为 props。
    3.  组件需包含标题文字（例如：“觉得有帮助？”）、说明文字（“可以请我喝杯咖啡鼓励一下！(自愿支持，不会解锁额外功能)”）以及并排或上下排列的微信和支付宝二维码图片。
    4.  在页脚 (`Footer.tsx`) 和结果页 (`result/page.tsx`) 合适的位置实例化并展示 `DonationSection` 组件。
    5.  UI 元素（布局、颜色、字体）必须使用 Tailwind CSS 和 shadcn/ui 组件（如果适用，如 `Card` 或 `Dialog` 弹出层），并与项目整体风格保持一致。
    6.  **预留追踪点**: 为二维码图片或包含它们的容器添加明确的 `data-testid` 或 `id` 属性，并绑定 `onClick` 或 `onMouseEnter` 事件处理器（初始可以为空函数），以便后续集成前端分析工具进行事件追踪（例如，追踪 `donate_qr_viewed` 或 `donate_qr_clicked`）。
* **约束**:
    * **禁止**引入新的外部 UI 库。
    * **禁止**实现任何与后端 API 的交互。这是一个纯前端 UI 任务。
    * **禁止**在二维码旁边显示任何具体的金额建议。

### 🧪 测试策略 (Test-First)
* **本任务主要测试类型**: **组件测试 (Component Test)**。
* **测试策略**:
    * **创建测试文件**: 为 `DonationSection` 组件创建 `@apps/web/src/components/feature/DonationSection.test.tsx`。
    * **编写失败的测试**:
        * 测试 1: 验证组件在接收到正确的图片路径 props 时，能够成功渲染出两个 `<img>` 元素，并且 `src` 属性正确。
        * 测试 2: 验证组件能够正确渲染出传入的标题和说明文字。
        * 测试 3: （可选）使用 React Testing Library 模拟点击/悬停事件，验证预留的事件处理器被调用（可以使用 `jest.fn()`）。
    * **运行测试**: 确认测试因组件尚未实现而失败。

### 🔄 实现步骤/要求 (Implementation Steps)
1.  ✅ **(已完成)** 微信和支付宝的收款二维码图片已放置在 `apps/web/public/` 目录下。
2.  **创建组件文件**: 创建 `DonationSection.tsx` 和对应的测试文件 `DonationSection.test.tsx`。
3.  **编写测试**: 按照“测试策略”编写失败的测试用例。
4.  **实现组件**: 编写 `DonationSection` 组件的代码，使其满足功能要求，并让所有测试通过。重点关注布局、样式和事件绑定。
5.  **集成组件**: 在 `Footer.tsx` 和 `result/page.tsx` 中引入并使用 `DonationSection` 组件，传入正确的二维码图片路径。
6.  **样式调整**: 使用 Tailwind CSS 确保组件在不同位置显示效果良好且风格统一。

### ✅ 完成检查清单 (Completion Checklist)
* [ ] `DonationSection` 组件已创建。
* [ ] `DonationSection.test.tsx` 已创建，包含至少 2-3 个核心测试用例，并通过 (`pnpm test`)。
* [ ] 组件能正确接收并显示二维码图片和说明文字。
* [ ] 组件已在页脚和结果页成功集成并显示。
* [ ] UI 风格符合项目规范 (shadcn/ui & Tailwind)。
* [ ] 已为追踪事件预留了明确的 DOM 属性和事件处理器。
* [ ] Lint 和类型检查通过 (`pnpm run lint`, `tsc --noEmit`)。
* [ ] 代码已提交，Commit Message 符合规范 (`@rules/210-...`)，例如 `feat(web): add donation QR code section`。

---